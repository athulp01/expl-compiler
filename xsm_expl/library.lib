MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Write"
MOV R3, "Read"
MOV R4, "Exit"
MOV R6, "Heapset"
MOV R7, "Alloc"
MOV R8, "Free"
MOV R5, [R1]
EQ R5, R2
JNZ R5, 56
MOV R5, [R1]
EQ R5, R3
JNZ R5, 88
MOV R5, [R1]
EQ R5, R4
JNZ R5, 120
MOV R5, [R1]
EQ R5, R6
JNZ R5, 170
MOV R5, [R1]
EQ R5, R7
JNZ R5, 198
MOV R5, [R1]
EQ R5, R8
JNZ R5, 234
RET
MOV R1, SP
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 5
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 7
JMP 150
MOV R1, SP 
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 7
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 6
JMP 150
MOV R1, SP 
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 10
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 10
POP R1
POP R2
POP R2
POP R2
POP R2
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
RET
MOV R0, 1024 
MOV R1, 2048
MOV R2, 8
MOV R5, R0
EQ R5, R1 
JNZ R5, 190
MOV [R0], R2
ADD R0, 8
ADD R2, 8
JMP 176
MOV R4, SP
SUB R4, 1
MOV [R4], 0
RET
MOV R0, [1024]
MOV R8, -1
EQ R0, R8
JNZ R0, 226
MOV R0, [1024]
MOV R1, 1024
ADD R1, R0
MOV R2, [R1]
MOV [1024], R2
MOV R4, SP
SUB R4, 1
ADD R0, 1024
MOV [R4], R0
RET
MOV R4, SP
SUB R4, 1
MOV [R4], -1
RET
MOV R0, SP
SUB R0, 4
BRKP
MOV R1, [R0]
MOV R5, R1
MOV R2, [1024]
MOV R3, R1
SUB R1, 1024
MOV [1024], R1
MOV [R5], R2
MOV R4, SP
SUB R4, 1
MOV [R4], 0
RET
